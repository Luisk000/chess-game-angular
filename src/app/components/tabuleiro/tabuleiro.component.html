<div class="tabuleiro">
  <div class="casas-tabuleiro">
    <div class="coluna" *ngFor="let coluna of tabuleiroBackground">
      <div
        class="casa"
        *ngFor="let casa of coluna"
        [ngStyle]="{ 'background-color': casa.cor }"
      ></div>
    </div>
  </div>
  <div class="casas-acao">
    <div class="coluna" *ngFor="let coluna of tabuleiroJogo; let col = index">
      <div
        class="casa"
        *ngFor="let casa of coluna; let ca = index"
        [ngClass]="{
          'acao-possivel': casa.cor === 'LimeGreen' && !jogoParado
        }"
        (click)="moverPeca(casa, col, ca)"
      >
        <span *ngIf="casa.peca">
          <img
            src="{{ casa.peca.imagem }}"
            class="imagem-peca"
            [ngClass]="{
              'peca-jogando': casa.peca.cor === timeJogando && !jogoParado
            }"
            (click)="verificarMovimentos(casa.peca, col, ca)"
          />
          <app-tabuleiro-promocao
            *ngIf="
              posicaoPromocao?.coluna == col && posicaoPromocao?.linha == ca
            "
            [time]="casa.peca.cor"
            [linha]="ca"
            (confirmarPeca)="confirmarPecaPeaoPromovido($event)"
          ></app-tabuleiro-promocao>
        </span>
      </div>
    </div>
  </div>
</div>

<app-tabuleiro-roque
  *ngIf="posicaoRoque === 'branco-left' || posicaoRoque === 'branco'"
  [marginTop]="-55"
  [marginLeft]="110"
  [width]="150"
  (click)="realizarRoque('branco-left')"
></app-tabuleiro-roque>
<app-tabuleiro-roque
  *ngIf="posicaoRoque === 'preto-left' || posicaoRoque === 'preto'"
  [marginTop]="-546"
  [marginLeft]="110"
  [width]="150"
  (click)="realizarRoque('preto-left')"
></app-tabuleiro-roque>
<app-tabuleiro-roque
  *ngIf="posicaoRoque === 'branco-right' || posicaoRoque === 'branco'"
  [marginTop]="-56"
  [marginLeft]="390"
  [width]="80"
  (click)="realizarRoque('branco-right')"
></app-tabuleiro-roque>
<app-tabuleiro-roque
  *ngIf="posicaoRoque === 'preto-right' || posicaoRoque === 'preto'"
  [marginTop]="-546"
  [marginLeft]="390"
  [width]="80"
  (click)="realizarRoque('preto-right')"
></app-tabuleiro-roque>
